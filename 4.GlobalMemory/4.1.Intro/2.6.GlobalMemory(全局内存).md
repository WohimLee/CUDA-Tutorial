
&emsp;
# 全局内存（Global Memory）
全局内存是 GPU 中`最大`、`延迟最高`并且 `最常用` 的内存

global 指的是其`作用域`和`生命周期`。它的声明可以在 `任何SM` 设备上（即所有线程）被访问到，并且贯穿应用程序的整个生命周期。

但是，从多个线程访问全局内存时必须注意。因为线程的执行不能跨线程块（block）同步，不同线程块内的多个线程并发地修改全局内存的同一位置可能会出现问题，这将导致一个未定义的程序行为。

>声明修饰符
- 一个全局内存变量可以被静态声明或动态声明。可以使用如下修饰符在设备代码中静态地声明一个变量：
```c++
__device__
```

>分配与释放
- 在 Host 端使用 cudaMalloc 函数分配全局内存
- 使用 cudaFree 函数释放全局内存

>全局内存的访问
- 全局内存常驻于设备内存中，可通过 `32-byte`、`64-byte` 或`128-byte` 的内存进行访问
- 这些内存事务必须 `自然对齐`，也就是说，`首地址` 必须是 `32-byte`、`64-byte` 或 `128-byte` 的倍数


优化内存传输过程对于获得最优性能来说是至关重要的。当一个线程束执行内存加载/ 存储时，需要满足的传输数量通常取决于以下两个因素： 
- 跨线程的内存地址分布
- 每个传输过程内存地址的对齐方式 


一个线程束内存请求，`传输任务的数量` 和 `数据吞吐率` 是由设备的计算能力来确定的。对于计算能力高于1.1的设备，由于内存传输任务被缓存，所以要求较为宽松。缓存的内存传输利用 `数据局部性` 来提高数据吞吐率

接下来，我们将研究如何优化全局内存访问，以及如何最大程度地提高全局内存的数据吞吐率

