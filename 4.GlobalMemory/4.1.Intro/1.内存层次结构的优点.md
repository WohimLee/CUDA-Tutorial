
# 内存层次结构的优点

>局部性原则
- 程序运行往往遵循局部性原则：在任意时间点，访问相对较小的局部地址空间
- 两种类型的局部性：
    - 时间局部性：如果一个数据位置被引用，那么该数据在较短的时间周期内很可能会再次被引用
    - 空间局部性：如果一个 内存位置被引用，则附近的位置也可能会被引用


现代计算机使用不断改进的 `低延迟低容量` 的内存层次结构来优化性能。这种内存层次结构 `仅在支持局部性原则的情况下` 有效。

>内存层次结构
- 由具有不同 `延迟`、`带宽` 和 `容量` 的多级内存组成

    <div align=center>
        <image src="imgs/1-1.png" width= 400>
    </div>

    - DRAM：CPU 和 GPU 的主存都采用的是DRAM（动态随机存取存储器）
    - SRAM：低延迟内存（如 CPU一级缓存）使用的则是SRAM（静态随机存取存储器）
    - 磁盘或闪存驱动：内存层次结构中最大且最慢的级别通常使用磁盘或闪存驱动来实现

- 在这种内存层次结构中
    - 当数据被处理器 `频繁使用` 时，该数据保存在低延迟、低容量的存储器中
    - 当该数据被 `存储起来以备后用` 时，数据就存储在高延迟、大容量的存储器中

>GPU 与 CPU 内存模型的区别
- GPU 与 CPU 在内存层次结构设计中都使用相似的准则和模型。GPU 和 CPU 内存模型的主要区别是，CUDA 编程模型能将内存层次结构更好地呈现给用户，能让我们显式地控制它的行为。